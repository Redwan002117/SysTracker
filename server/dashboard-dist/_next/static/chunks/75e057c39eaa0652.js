(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},14764,e=>{"use strict";let t=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},38036,e=>{"use strict";let t="systracker_token",s="systracker_username";function r(){return localStorage.getItem(t)}function a(e,r){localStorage.setItem(t,e),localStorage.setItem(s,r)}function l(){localStorage.removeItem(t),localStorage.removeItem(s)}function i(){return localStorage.getItem(s)}function n(){let e=r();return!!e&&!function(e){try{let t=JSON.parse(atob(e.split(".")[1]));return 1e3*t.exp<Date.now()}catch{return!0}}(e)}async function o(e,t={}){let s=r();return fetch(e,{...t,headers:{"Content-Type":"application/json",...t.headers||{},...s?{Authorization:`Bearer ${s}`}:{}}})}e.s(["clearToken",()=>l,"fetchWithAuth",()=>o,"getToken",()=>r,"getUsername",()=>i,"isAuthenticated",()=>n,"setToken",()=>a])},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},75254,e=>{"use strict";var t=e.i(71645);let s=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:n="",children:o,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...a,width:r,height:r,stroke:e,strokeWidth:i?24*Number(l)/Number(r):l,className:s("lucide",n),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(o)?o:[o]])),i=(e,a)=>{let i=(0,t.forwardRef)(({className:i,...n},o)=>(0,t.createElement)(l,{ref:o,iconNode:a,className:s(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...n}));return i.displayName=r(e),i};e.s(["default",()=>i],75254)},18566,(e,t,s)=>{t.exports=e.r(76562)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},39312,e=>{"use strict";let t=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},62319,60681,e=>{"use strict";var t=e.i(43476),s=e.i(22016),r=e.i(18566),a=e.i(39312);let l=(0,e.i(75254).default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var i=e.i(84614),n=e.i(46932),o=e.i(38036),c=e.i(71645);e.s(["default",0,()=>{let e=(0,r.usePathname)(),d=(0,r.useRouter)(),[u,h]=(0,c.useState)(!1),[m,x]=(0,c.useState)(null);(0,c.useEffect)(()=>{h((0,o.isAuthenticated)()),x((0,o.getUsername)())},[e]);let p=async()=>{let e=localStorage.getItem("systracker_token");e&&fetch("/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${e}`}}).catch(()=>{}),(0,o.clearToken)(),d.push("/login")},f="/dashboard"===e;return(0,t.jsx)(n.motion.nav,{initial:{y:-100},animate:{y:0},className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200/50 supports-[backdrop-filter]:bg-white/60",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)(s.default,{href:"/",className:"flex items-center gap-2 group",children:[(0,t.jsx)("div",{className:"bg-blue-600 text-white p-1.5 rounded-lg shadow-lg shadow-blue-500/30 group-hover:shadow-blue-500/50 transition-all duration-300",children:(0,t.jsx)(a.Zap,{size:20,fill:"currentColor",className:"group-hover:scale-110 transition-transform"})}),(0,t.jsxs)("span",{className:"font-bold text-xl tracking-tight text-slate-900",children:["Sys",(0,t.jsx)("span",{className:"text-blue-600",children:"Tracker"})]})]}),(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-8",children:[(0,t.jsx)(s.default,{href:"/dashboard",className:`text-sm font-medium transition-colors hover:text-blue-600 ${"/dashboard"===e?"text-blue-600":"text-slate-600"}`,children:"Dashboard"}),(0,t.jsx)(s.default,{href:"/dashboard/settings",className:`text-sm font-medium transition-colors hover:text-blue-600 ${"/dashboard/settings"===e?"text-blue-600":"text-slate-600"}`,children:"Settings"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[f&&u&&(0,t.jsxs)(t.Fragment,{children:[m&&(0,t.jsxs)(s.default,{href:"/dashboard/profile",className:"hidden sm:flex items-center gap-1.5 text-sm text-slate-500 hover:text-blue-600 transition-colors",children:[(0,t.jsx)(i.User,{size:14}),(0,t.jsx)("span",{className:"font-medium",children:m})]}),(0,t.jsxs)("button",{onClick:p,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-red-600 hover:bg-red-50 transition-all cursor-pointer",title:"Sign out",children:[(0,t.jsx)(l,{size:16}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Sign out"})]})]}),!f&&!u&&"/login"!==e&&(0,t.jsx)(s.default,{href:"/login",children:(0,t.jsxs)("button",{className:"bg-slate-900 hover:bg-slate-800 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 active:translate-y-0 flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)(i.User,{size:16}),"Log In"]})})]})]})})})}],62319);var d=e.i(31278);function u({children:e}){let s=(0,r.useRouter)(),[l,i]=(0,c.useState)("checking");return((0,c.useEffect)(()=>{!async function(){let e=async(e,t={})=>{let s=new AbortController,r=setTimeout(()=>s.abort(),5e3);try{let a=await fetch(e,{...t,signal:s.signal});return clearTimeout(r),a}catch(e){throw clearTimeout(r),e}};if(!(0,o.isAuthenticated)()){try{let t=await e("/api/auth/status");(await t.json()).setup_required?s.replace("/setup"):s.replace("/login")}catch{s.replace("/login")}i("redirect");return}try{let t=(0,o.getToken)();(await e("/api/auth/me",{headers:{Authorization:`Bearer ${t}`}})).ok?i("authenticated"):((0,o.clearToken)(),s.replace("/login"),i("redirect"))}catch{console.warn("Auth check failed (network), assuming offline authenticated"),i("authenticated")}}()},[s]),"checking"===l)?(0,t.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"bg-blue-600 text-white p-3 rounded-2xl shadow-xl",children:(0,t.jsx)(a.Zap,{size:28,fill:"currentColor"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-slate-500",children:[(0,t.jsx)(d.Loader2,{size:18,className:"animate-spin"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Verifying session..."})]})]})}):"redirect"===l?null:(0,t.jsx)(t.Fragment,{children:e})}e.s(["default",()=>u],60681)},18393,e=>{"use strict";let t=(0,e.i(75254).default)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);e.s(["Server",()=>t],18393)},41507,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(62319),a=e.i(60681),l=e.i(38036),i=e.i(63488),n=e.i(56909),o=e.i(18393),c=e.i(63209),d=e.i(69638),u=e.i(14764);function h(){let[e,h]=(0,s.useState)(!0),[m,x]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),[g,b]=(0,s.useState)(null),[y,j]=(0,s.useState)({host:"",port:"587",user:"",password:"",secure:"false",from:""});(0,s.useEffect)(()=>{(0,l.fetchWithAuth)("/api/settings/smtp").then(e=>e.json()).then(e=>{if(e.error)throw Error(e.error);j({host:e.host,port:e.port,user:e.user,password:e.has_password?"********":"",secure:String(e.secure),from:e.from}),h(!1)}).catch(e=>{b({type:"error",text:"Failed to load settings: "+e.message}),h(!1)})},[]);let v=async e=>{e.preventDefault(),x(!0),b(null);try{let e=await (0,l.fetchWithAuth)("/api/settings/smtp",{method:"PUT",body:JSON.stringify(y)}),t=await e.json();if(!e.ok)throw Error(t.error);b({type:"success",text:"Settings saved successfully!"})}catch(e){b({type:"error",text:e.message})}finally{x(!1)}},w=async()=>{f(!0),b(null);try{let e=await (0,l.fetchWithAuth)("/api/settings/smtp/test",{method:"POST"}),t=await e.json();if(!e.ok)throw Error(t.error);b({type:"success",text:t.message})}catch(e){b({type:"error",text:e.message})}finally{f(!1)}};return(0,t.jsx)(a.default,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50/50",children:[(0,t.jsx)(r.default,{}),(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-12",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,t.jsx)(o.Server,{className:"text-blue-600"})," System Settings"]}),(0,t.jsx)("p",{className:"text-slate-500 mt-1",children:"Configure global application settings."})]}),g&&(0,t.jsxs)("div",{className:`p-4 rounded-lg mb-6 flex items-center gap-2 ${"success"===g.type?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:["success"===g.type?(0,t.jsx)(d.CheckCircle,{size:20}):(0,t.jsx)(c.AlertCircle,{size:20}),g.text]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(i.Mail,{size:18,className:"text-slate-400"})," SMTP Configuration"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Configure email server settings for notifications and password resets."})]}),(0,t.jsxs)("form",{onSubmit:v,className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"SMTP Host"}),(0,t.jsx)("input",{type:"text",value:y.host,onChange:e=>j({...y,host:e.target.value}),placeholder:"smtp.example.com",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Port"}),(0,t.jsx)("input",{type:"number",value:y.port,onChange:e=>j({...y,port:e.target.value}),placeholder:"587",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Username"}),(0,t.jsx)("input",{type:"text",value:y.user,onChange:e=>j({...y,user:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),(0,t.jsx)("input",{type:"password",value:y.password,onChange:e=>j({...y,password:e.target.value}),placeholder:"••••••••",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Encryption (Secure)"}),(0,t.jsxs)("select",{value:y.secure,onChange:e=>j({...y,secure:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[(0,t.jsx)("option",{value:"false",children:"false (TLS - Port 587)"}),(0,t.jsx)("option",{value:"true",children:"true (SSL - Port 465)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"From Email"}),(0,t.jsx)("input",{type:"text",value:y.from,onChange:e=>j({...y,from:e.target.value}),placeholder:'"SysTracker" <no-reply@example.com>',className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100 mt-4",children:[(0,t.jsx)("button",{type:"button",onClick:w,disabled:p||e,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 hover:bg-slate-50 font-medium rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:p?"Sending...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Send,{size:18})," Test Connection"]})}),(0,t.jsx)("button",{type:"submit",disabled:m||e,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:m?"Saving...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Save,{size:18})," Save Settings"]})})]})]})]})]})]})})}e.s(["default",()=>h])}]);