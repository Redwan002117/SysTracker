(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},70756,e=>{"use strict";let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},75254,e=>{"use strict";var t=e.i(71645);let s=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:n="",children:o,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...r,width:a,height:a,stroke:e,strokeWidth:i?24*Number(l)/Number(a):l,className:s("lucide",n),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(o)?o:[o]])),i=(e,r)=>{let i=(0,t.forwardRef)(({className:i,...n},o)=>(0,t.createElement)(l,{ref:o,iconNode:r,className:s(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...n}));return i.displayName=a(e),i};e.s(["default",()=>i],75254)},18566,(e,t,s)=>{t.exports=e.r(76562)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},39312,e=>{"use strict";let t=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},38036,e=>{"use strict";let t="systracker_token",s="systracker_username";function a(){return localStorage.getItem(t)}function r(e,a){localStorage.setItem(t,e),localStorage.setItem(s,a)}function l(){localStorage.removeItem(t),localStorage.removeItem(s)}function i(){return localStorage.getItem(s)}function n(){let e=a();return!!e&&!function(e){try{let t=JSON.parse(atob(e.split(".")[1]));return 1e3*t.exp<Date.now()}catch{return!0}}(e)}async function o(e,t={}){let s=a();return fetch(e,{...t,headers:{"Content-Type":"application/json",...t.headers||{},...s?{Authorization:`Bearer ${s}`}:{}}})}e.s(["clearToken",()=>l,"fetchWithAuth",()=>o,"getToken",()=>a,"getUsername",()=>i,"isAuthenticated",()=>n,"setToken",()=>r])},62319,60681,e=>{"use strict";var t=e.i(43476),s=e.i(22016),a=e.i(18566),r=e.i(39312);let l=(0,e.i(75254).default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var i=e.i(84614),n=e.i(46932),o=e.i(38036),c=e.i(71645);e.s(["default",0,()=>{let e=(0,a.usePathname)(),d=(0,a.useRouter)(),[u,h]=(0,c.useState)(!1),[m,x]=(0,c.useState)(null);(0,c.useEffect)(()=>{h((0,o.isAuthenticated)()),x((0,o.getUsername)())},[e]);let f=async()=>{let e=localStorage.getItem("systracker_token");e&&fetch("/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${e}`}}).catch(()=>{}),(0,o.clearToken)(),d.push("/login")},p="/dashboard"===e;return(0,t.jsx)(n.motion.nav,{initial:{y:-100},animate:{y:0},className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200/50 supports-[backdrop-filter]:bg-white/60",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)(s.default,{href:"/",className:"flex items-center gap-2 group",children:[(0,t.jsx)("div",{className:"bg-blue-600 text-white p-1.5 rounded-lg shadow-lg shadow-blue-500/30 group-hover:shadow-blue-500/50 transition-all duration-300",children:(0,t.jsx)(r.Zap,{size:20,fill:"currentColor",className:"group-hover:scale-110 transition-transform"})}),(0,t.jsxs)("span",{className:"font-bold text-xl tracking-tight text-slate-900",children:["Sys",(0,t.jsx)("span",{className:"text-blue-600",children:"Tracker"})]})]}),(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-8",children:[(0,t.jsx)(s.default,{href:"/dashboard",className:`text-sm font-medium transition-colors hover:text-blue-600 ${"/dashboard"===e?"text-blue-600":"text-slate-600"}`,children:"Dashboard"}),(0,t.jsx)(s.default,{href:"/dashboard/settings",className:`text-sm font-medium transition-colors hover:text-blue-600 ${"/dashboard/settings"===e?"text-blue-600":"text-slate-600"}`,children:"Settings"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[p&&u&&(0,t.jsxs)(t.Fragment,{children:[m&&(0,t.jsxs)(s.default,{href:"/dashboard/profile",className:"hidden sm:flex items-center gap-1.5 text-sm text-slate-500 hover:text-blue-600 transition-colors",children:[(0,t.jsx)(i.User,{size:14}),(0,t.jsx)("span",{className:"font-medium",children:m})]}),(0,t.jsxs)("button",{onClick:f,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-red-600 hover:bg-red-50 transition-all cursor-pointer",title:"Sign out",children:[(0,t.jsx)(l,{size:16}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Sign out"})]})]}),!p&&!u&&"/login"!==e&&(0,t.jsx)(s.default,{href:"/login",children:(0,t.jsxs)("button",{className:"bg-slate-900 hover:bg-slate-800 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 active:translate-y-0 flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)(i.User,{size:16}),"Log In"]})})]})]})})})}],62319);var d=e.i(31278);function u({children:e}){let s=(0,a.useRouter)(),[l,i]=(0,c.useState)("checking");return((0,c.useEffect)(()=>{!async function(){let e=async(e,t={})=>{let s=new AbortController,a=setTimeout(()=>s.abort(),5e3);try{let r=await fetch(e,{...t,signal:s.signal});return clearTimeout(a),r}catch(e){throw clearTimeout(a),e}};if(!(0,o.isAuthenticated)()){try{let t=await e("/api/auth/status");(await t.json()).setup_required?s.replace("/setup"):s.replace("/login")}catch{s.replace("/login")}i("redirect");return}try{let t=(0,o.getToken)();(await e("/api/auth/me",{headers:{Authorization:`Bearer ${t}`}})).ok?i("authenticated"):((0,o.clearToken)(),s.replace("/login"),i("redirect"))}catch{console.warn("Auth check failed (network), assuming offline authenticated"),i("authenticated")}}()},[s]),"checking"===l)?(0,t.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"bg-blue-600 text-white p-3 rounded-2xl shadow-xl",children:(0,t.jsx)(r.Zap,{size:28,fill:"currentColor"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-slate-500",children:[(0,t.jsx)(d.Loader2,{size:18,className:"animate-spin"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Verifying session..."})]})]})}):"redirect"===l?null:(0,t.jsx)(t.Fragment,{children:e})}e.s(["default",()=>u],60681)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},39435,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(62319),r=e.i(60681),l=e.i(38036),i=e.i(84614),n=e.i(63488),o=e.i(70756),c=e.i(56909),d=e.i(63209),u=e.i(69638);function h(){let[e,h]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[f,p]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[w,v]=(0,s.useState)(!1),[k,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=(0,l.getUsername)();e&&h(e)},[]);let S=async t=>{t.preventDefault(),v(!0),N(null);try{let t=await (0,l.fetchWithAuth)("/api/auth/profile",{method:"PUT",body:JSON.stringify({email:m,username:e})}),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to update profile");N({type:"success",text:"Profile updated successfully!"})}catch(e){N({type:"error",text:e.message})}finally{v(!1)}},C=async e=>{if(e.preventDefault(),g!==y)return void N({type:"error",text:"New passwords do not match"});v(!0),N(null);try{let e=await (0,l.fetchWithAuth)("/api/auth/change-password",{method:"POST",body:JSON.stringify({current_password:f,new_password:g})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to change password");N({type:"success",text:"Password changed successfully!"}),p(""),b(""),j("")}catch(e){N({type:"error",text:e.message})}finally{v(!1)}};return(0,t.jsx)(r.default,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50/50",children:[(0,t.jsx)(a.default,{}),(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-12",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:[(0,t.jsx)(i.User,{className:"text-blue-600"})," User Profile"]}),(0,t.jsx)("p",{className:"text-slate-500 mt-1",children:"Manage your account settings and security."})]}),k&&(0,t.jsxs)("div",{className:`p-4 rounded-lg mb-6 flex items-center gap-2 ${"success"===k.type?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:["success"===k.type?(0,t.jsx)(u.CheckCircle,{size:20}):(0,t.jsx)(d.AlertCircle,{size:20}),k.text]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,t.jsx)(n.Mail,{size:18,className:"text-slate-400"})," Account Details"]}),(0,t.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Username"}),(0,t.jsx)("input",{type:"text",value:e,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email Address"}),(0,t.jsx)("input",{type:"email",value:m,onChange:e=>x(e.target.value),placeholder:"admin@example.com",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 rounded-lg transition-colors flex justify-center items-center gap-2",children:[(0,t.jsx)(c.Save,{size:18})," Save Changes"]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[(0,t.jsx)(o.Lock,{size:18,className:"text-slate-400"})," Security"]}),(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Current Password"}),(0,t.jsx)("input",{type:"password",value:f,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"New Password"}),(0,t.jsx)("input",{type:"password",value:g,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirm Password"}),(0,t.jsx)("input",{type:"password",value:y,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("button",{type:"submit",disabled:w,className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-medium py-2 rounded-lg transition-colors flex justify-center items-center gap-2",children:[(0,t.jsx)(o.Lock,{size:18})," Update Password"]})]})]})]})]})]})})}e.s(["default",()=>h])}]);