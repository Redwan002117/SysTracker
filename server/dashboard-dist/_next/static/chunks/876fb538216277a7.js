(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77744,e=>{"use strict";let t=(0,e.i(24929).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],77744)},71259,e=>{"use strict";let t=(0,e.i(24929).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],71259)},16511,e=>{"use strict";let t=(0,e.i(24929).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],16511)},93371,e=>{"use strict";let t=(0,e.i(24929).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],93371)},17278,e=>{"use strict";let t=(0,e.i(24929).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],17278)},52852,e=>{"use strict";let t=(0,e.i(24929).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],52852)},75025,e=>{"use strict";let t=(0,e.i(24929).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],75025)},6847,e=>{"use strict";let t=(0,e.i(24929).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],6847)},83573,e=>{"use strict";let t=(0,e.i(24929).default)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Radio",()=>t],83573)},67307,e=>{"use strict";let t=(0,e.i(24929).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],67307)},78130,e=>{"use strict";let t=(0,e.i(24929).default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]);e.s(["Clock",()=>t],78130)},46046,e=>{"use strict";var t=e.i(27493),s=e.i(4),a=e.i(33149),l=e.i(27187),r=e.i(52852),i=e.i(77744),n=e.i(67307),o=e.i(24929);let c=(0,o.default)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var d=e.i(58322),x=e.i(6847),h=e.i(93371);let u=(0,o.default)("reply",[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]]);var m=e.i(17278),p=e.i(53097),b=e.i(78130),f=e.i(71259);let y=(0,o.default)("at-sign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);var g=e.i(87175);let j=(0,o.default)("octagon-alert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]),v=(0,o.default)("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);var k=e.i(83573),w=e.i(75025),N=e.i(16511),M=e.i(85506),S=e.i(19238);let _={maintenance:{label:"Maintenance Notice",icon:g.Wrench,color:"from-amber-500 to-orange-500",desc:"Scheduled downtime alert",subject:"Scheduled Maintenance Window",body:"Dear user,\n\nWe want to inform you that SysTracker will undergo scheduled maintenance.\n\nStart: [START_TIME]\nEnd: [END_TIME]\n\nDuring this window, the dashboard may be temporarily unavailable. We apologize for any inconvenience.\n\nRegards,\nSysTracker Admin"},machine_offline:{label:"Machine Offline",icon:k.Radio,color:"from-red-500 to-rose-500",desc:"Machine went offline",subject:"Alert: Machine Has Gone Offline",body:"Hello,\n\nThis is an automated alert to inform you that a machine under your account has gone offline.\n\nHostname: [HOSTNAME]\nLast Seen: [LAST_SEEN]\n\nPlease check the agent is running and the machine has internet connectivity.\n\nRegards,\nSysTracker Monitoring"},welcome:{label:"Welcome Message",icon:v,color:"from-emerald-500 to-teal-500",desc:"New user onboarding",subject:"Welcome to SysTracker!",body:"Hi [USERNAME],\n\nWelcome to SysTracker â€” your real-time infrastructure monitoring solution.\n\nYour account has been created successfully. You can now:\n- Monitor connected machines\n- View real-time CPU, RAM, and Disk metrics\n- Manage alerts and notifications\n\nIf you have any questions, feel free to reach out.\n\nWelcome aboard!\nSysTracker Team"},alert_critical:{label:"Critical Alert",icon:j,color:"from-red-600 to-red-700",desc:"Critical threshold breach",subject:"Critical System Alert",body:"WARNING: A critical threshold has been detected on one of your monitored machines.\n\nMachine: [HOSTNAME]\nMetric: [METRIC]\nValue: [VALUE]%\n\nPlease investigate immediately to prevent service disruption.\n\nSysTracker Monitoring System"},custom:{label:"Custom Message",icon:w.FileText,color:"from-slate-400 to-slate-500",desc:"Write your own message",subject:"",body:""}};function C(){let[e,o]=(0,s.useState)("inbox"),[g,j]=(0,s.useState)([]),[v,k]=(0,s.useState)(null),[w,C]=(0,s.useState)(!1),[z,T]=(0,s.useState)([]),[A,W]=(0,s.useState)(""),[E,$]=(0,s.useState)(!1),[R,H]=(0,s.useState)(!1),[L,P]=(0,s.useState)({to_user:"",subject:"",body:""}),[U,O]=(0,s.useState)(!1),[D,I]=(0,s.useState)(""),[V,q]=(0,s.useState)("internal"),[F,B]=(0,s.useState)(!1),G=(0,s.useCallback)(async()=>{C(!0);try{let t=await (0,a.fetchWithAuth)(`/api/mail?folder=${e}`);t.ok&&j(await t.json())}finally{C(!1)}},[e]);(0,s.useEffect)(()=>{G()},[G]),(0,s.useEffect)(()=>{(0,a.fetchWithAuth)("/api/mail-users").then(e=>e.ok?e.json():[]).then(T).catch(()=>{})},[]);let K=async t=>{k(t),t.is_read||"inbox"!==e||(await (0,a.fetchWithAuth)(`/api/mail/${t.id}`),j(e=>e.map(e=>e.id===t.id?{...e,is_read:1}:e)))},X=async e=>{await (0,a.fetchWithAuth)(`/api/mail/${e}`,{method:"DELETE"}),j(t=>t.filter(t=>t.id!==e)),v?.id===e&&k(null)},Y=async()=>{if(!L.to_user||!L.subject||!L.body)return void I("All fields are required.");if("external"===V&&!L.to_user.includes("@"))return void I("Please enter a valid email address");O(!0),I("");try{let t=await (0,a.fetchWithAuth)("/api/mail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(t.ok){let s=await t.json();$(!1),P({to_user:"",subject:"",body:""}),q("internal"),"sent"===e&&G(),console.log(`${"external"===s.type?"External email":"Internal message"} sent successfully`)}else{let e=await t.json().catch(()=>({error:"Send failed"}));I(e.error||"Send failed")}}finally{O(!1)}},J=e=>{let t=_[e];P(e=>({...e,subject:t.subject||e.subject,body:t.body||e.body})),H(!1)},Q=g.filter(e=>e.subject.toLowerCase().includes(A.toLowerCase())||e.from_user.toLowerCase().includes(A.toLowerCase())||e.to_user.toLowerCase().includes(A.toLowerCase()));return(0,t.jsxs)("main",{className:"max-w-350 mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-linear-to-br from-blue-500 to-purple-600 p-3 rounded-2xl shadow-lg shadow-blue-500/25",children:(0,t.jsx)(l.Mail,{className:"text-white",size:24,strokeWidth:2.5})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold bg-linear-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-2",children:["Mailbox",(0,t.jsx)("span",{className:"text-xs bg-linear-to-r from-amber-500 to-orange-500 text-white px-2 py-0.5 rounded-full font-semibold",children:"Admin"})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Internal messaging & external email system"})]})]}),(0,t.jsxs)("button",{onClick:()=>{$(!0),P({to_user:"",subject:"",body:""})},className:"flex items-center gap-2 px-5 py-2.5 bg-linear-to-r from-blue-600 to-purple-600 text-white rounded-xl text-sm font-semibold hover:shadow-lg hover:shadow-blue-500/30 transition-all duration-200 hover:scale-105",children:[(0,t.jsx)(h.Plus,{size:16,strokeWidth:2.5})," Compose"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[220px_1fr_420px] gap-4",style:{height:"calc(100vh - 200px)"},children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1 p-3 overflow-hidden bg-white/90 backdrop-blur-xl border border-white/20 rounded-2xl shadow-[0_8px_32px_rgba(0,0,0,0.08)]",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-slate-400 uppercase px-2 mb-2",children:"Folders"}),["inbox","sent"].map(s=>(0,t.jsxs)("button",{onClick:()=>{o(s),k(null)},className:`flex items-center gap-2.5 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 ${e===s?"bg-linear-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:scale-[1.02]"}`,children:["inbox"===s?(0,t.jsx)(c,{size:16,strokeWidth:2.5}):(0,t.jsx)(r.Send,{size:16,strokeWidth:2.5}),s.charAt(0).toUpperCase()+s.slice(1)]},s)),(0,t.jsxs)("div",{className:"mt-4 border-t border-slate-100 pt-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-slate-400 uppercase px-2 mb-2",children:"Quick Templates"}),Object.entries(_).map(([e,s])=>(0,t.jsx)("button",{onClick:()=>{J(e),$(!0)},className:"w-full text-left px-3 py-2 rounded-lg text-xs text-slate-500 hover:bg-slate-100/60 hover:text-slate-700 transition-colors truncate",children:s.label},e))]})]}),(0,t.jsxs)("div",{className:"flex flex-col overflow-hidden bg-white/90 backdrop-blur-xl border border-white/20 rounded-2xl shadow-[0_8px_32px_rgba(0,0,0,0.08)]",children:[(0,t.jsxs)("div",{className:"px-4 pt-4 pb-2 border-b border-slate-100/60 flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(x.Search,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search messages...",value:A,onChange:e=>W(e.target.value),className:"w-full pl-8 pr-3 py-2 rounded-xl bg-slate-50/80 border border-slate-200/60 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all duration-200 hover:shadow-sm"})]}),(0,t.jsx)("button",{onClick:G,className:"p-2 hover:bg-linear-to-br hover:from-blue-50 hover:to-purple-50 rounded-xl text-slate-400 hover:text-blue-500 transition-all duration-200 hover:scale-110",title:"Refresh",children:(0,t.jsx)(n.RefreshCw,{size:15,strokeWidth:2.5,className:w?"animate-spin":""})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto divide-y divide-slate-100/60",children:[w&&0===Q.length&&(0,t.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,t.jsx)(n.RefreshCw,{size:20,className:"text-blue-400 animate-spin"})}),!w&&0===Q.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 text-slate-400",children:[(0,t.jsx)(c,{size:28,className:"opacity-30 mb-2"}),(0,t.jsx)("p",{className:"text-sm",children:"No messages"})]}),(0,t.jsx)(S.AnimatePresence,{children:Q.map(s=>(0,t.jsx)(M.motion.div,{initial:{opacity:0},animate:{opacity:1},onClick:()=>K(s),className:`px-4 py-3 cursor-pointer hover:bg-blue-50/50 transition-all ${v?.id===s.id?"bg-blue-50/80":""}`,children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${"inbox"===e?"bg-linear-to-br from-blue-400 to-indigo-500 text-white":"bg-linear-to-br from-slate-400 to-slate-500 text-white"}`,children:("inbox"===e?s.from_user:s.to_user).slice(0,2).toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,t.jsx)("p",{className:`text-sm truncate ${!s.is_read&&"inbox"===e?"font-bold text-slate-900":"font-medium text-slate-700"}`,children:"inbox"===e?s.from_user:s.to_user}),(0,t.jsx)("span",{className:"text-xs text-slate-400 shrink-0",children:function(e){let t=Math.floor((Date.now()-new Date(e).getTime())/6e4);if(t<1)return"just now";if(t<60)return`${t}m ago`;let s=Math.floor(t/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}(s.created_at)})]}),(0,t.jsx)("p",{className:`text-xs truncate mt-0.5 ${!s.is_read&&"inbox"===e?"text-slate-700 font-semibold":"text-slate-500"}`,children:s.subject})]}),!s.is_read&&"inbox"===e&&(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-blue-500 shrink-0 mt-2"})]})},s.id))})]})]}),(0,t.jsx)("div",{className:"flex flex-col overflow-hidden bg-white/90 backdrop-blur-xl border border-white/20 rounded-2xl shadow-[0_8px_32px_rgba(0,0,0,0.08)]",children:v?(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"px-5 pt-5 pb-4 border-b border-slate-100/60",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsx)("h2",{className:"text-base font-bold text-slate-800 leading-snug",children:v.subject}),(0,t.jsxs)("div",{className:"flex gap-1 shrink-0",children:[(0,t.jsx)("button",{onClick:()=>{P({to_user:v.from_user,subject:`Re: ${v.subject}`,body:`

--- Original message from ${v.from_user} ---
${v.body}`}),$(!0)},className:"p-1.5 text-slate-400 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:"Reply",children:(0,t.jsx)(u,{size:15})}),(0,t.jsx)("button",{onClick:()=>X(v.id),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:(0,t.jsx)(i.Trash2,{size:15})})]})]}),(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-1 text-xs text-slate-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(p.User,{size:11}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"font-medium",children:"From:"})," ",v.from_user]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(p.User,{size:11}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"font-medium",children:"To:"})," ",v.to_user]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(b.Clock,{size:11}),(0,t.jsx)("span",{children:new Date(v.created_at).toLocaleString()})]})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:(0,t.jsx)("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans leading-relaxed",children:v.body})})]}):(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400",children:[(0,t.jsx)("div",{className:"bg-linear-to-br from-blue-100 to-purple-100 p-6 rounded-2xl mb-4",children:(0,t.jsx)(f.Eye,{size:40,className:"text-blue-500 opacity-60",strokeWidth:2})}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Select a message to preview"})]})})]}),(0,t.jsx)(S.AnimatePresence,{children:E&&(0,t.jsxs)(M.motion.div,{initial:{opacity:0,y:40,scale:.97},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:40,scale:.97},transition:{type:"spring",stiffness:300,damping:28},className:"fixed bottom-6 right-6 w-[480px] z-50 flex flex-col bg-white/95 backdrop-blur-2xl border border-white/20 rounded-2xl shadow-[0_24px_48px_rgba(0,0,0,0.12)] max-h-[560px]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100/60 bg-linear-to-r from-blue-50/50 to-purple-50/50",children:[(0,t.jsxs)("h3",{className:"text-sm font-bold bg-linear-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-2",children:[(0,t.jsx)(r.Send,{size:14,className:"text-blue-500",strokeWidth:2.5})," New Message"]}),(0,t.jsx)("button",{onClick:()=>$(!1),className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-1 transition-all duration-200 hover:scale-110",children:(0,t.jsx)(m.X,{size:16,strokeWidth:2.5})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 px-4 py-3 overflow-y-auto flex-1",children:[(0,t.jsxs)("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-xl",children:[(0,t.jsxs)("button",{onClick:()=>{q("internal"),P(e=>({...e,to_user:""}))},className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium transition-all ${"internal"===V?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[(0,t.jsx)(p.User,{size:13,strokeWidth:2.5}),"Internal User"]}),(0,t.jsxs)("button",{onClick:()=>{q("external"),P(e=>({...e,to_user:""}))},className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium transition-all ${"external"===V?"bg-white text-purple-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[(0,t.jsx)(y,{size:13,strokeWidth:2.5}),"External Email"]})]}),"internal"===V?(0,t.jsxs)("select",{value:L.to_user,onChange:e=>P(t=>({...t,to_user:e.target.value})),className:"px-3 py-2 rounded-xl border border-slate-200 text-sm bg-slate-50/80 focus:outline-none focus:ring-2 focus:ring-blue-400/30",children:[(0,t.jsx)("option",{value:"",children:"To: Select user..."}),z.map(e=>(0,t.jsx)("option",{value:e.username,children:e.display_name?`${e.display_name} (${e.username})`:e.username},e.username))]}):(0,t.jsx)("input",{type:"email",placeholder:"To: Enter email address (e.g., user@example.com)",value:L.to_user,onChange:e=>P(t=>({...t,to_user:e.target.value})),className:"px-3 py-2 rounded-xl border border-slate-200 text-sm bg-slate-50/80 focus:outline-none focus:ring-2 focus:ring-purple-400/30"}),(0,t.jsx)("input",{type:"text",placeholder:"Subject",value:L.subject,onChange:e=>P(t=>({...t,subject:e.target.value})),className:"px-3 py-2 rounded-xl border border-slate-200 text-sm bg-slate-50/80 focus:outline-none focus:ring-2 focus:ring-blue-400/30"}),(0,t.jsx)("textarea",{rows:8,placeholder:"Write your message...",value:L.body,onChange:e=>P(t=>({...t,body:e.target.value})),className:"px-3 py-2 rounded-xl border border-slate-200 text-sm bg-slate-50/80 focus:outline-none focus:ring-2 focus:ring-blue-400/30 resize-none"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>H(e=>!e),className:"w-full flex items-center justify-between px-3 py-2 text-xs font-semibold text-slate-500 uppercase tracking-wider hover:text-slate-700 transition-colors",children:[(0,t.jsx)("span",{children:"Use a template"}),(0,t.jsx)(d.ChevronDown,{size:13,className:`transition-transform duration-200 ${R?"rotate-180":""}`})]}),(0,t.jsx)(S.AnimatePresence,{children:R&&(0,t.jsx)(M.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},className:"overflow-hidden",children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-1.5 pb-1",children:Object.entries(_).map(([e,s])=>{let a=s.icon;return(0,t.jsxs)("button",{onClick:()=>J(e),className:"flex items-center gap-3 px-3 py-2.5 rounded-xl border border-slate-100 hover:border-blue-200 hover:bg-blue-50/50 text-left transition-all group",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-lg bg-linear-to-br ${s.color} flex items-center justify-center shrink-0 shadow-sm`,children:(0,t.jsx)(a,{size:14,className:"text-white"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-slate-700 group-hover:text-blue-700 transition-colors",children:s.label}),(0,t.jsx)("p",{className:"text-[10px] text-slate-400 truncate",children:s.desc})]}),(0,t.jsx)(N.Check,{size:13,className:"text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity shrink-0"})]},e)})})})})]}),D&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:D})]}),(0,t.jsx)("div",{className:"px-4 py-3 border-t border-slate-100/60",children:(0,t.jsxs)("button",{onClick:Y,disabled:U,className:"w-full flex items-center justify-center gap-2 py-2.5 bg-linear-to-r from-blue-600 to-purple-600 text-white rounded-xl text-sm font-semibold hover:shadow-lg hover:shadow-blue-500/30 disabled:opacity-50 transition-all duration-200 hover:scale-[1.02]",children:[U?(0,t.jsx)(n.RefreshCw,{size:14,strokeWidth:2.5,className:"animate-spin"}):(0,t.jsx)(r.Send,{size:14,strokeWidth:2.5}),U?"Sending...":"Send Message"]})})]})})]})}e.s(["default",()=>C],46046)}]);