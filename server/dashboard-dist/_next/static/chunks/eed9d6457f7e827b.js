(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72141,e=>{"use strict";var t=e.i(27493),s=e.i(4),l=e.i(16871),a=e.i(33149),r=e.i(27187),i=e.i(32949),o=e.i(54933),n=e.i(27528),d=e.i(72142),c=e.i(83753),x=e.i(52852),m=e.i(24929);let u=(0,m.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),h=(0,m.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var p=e.i(67307);let b=(0,m.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var g=e.i(62604);let f=(0,m.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),j=(0,m.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),y=(0,m.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var v=e.i(17278),N=e.i(25019);let w=(0,m.default)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),k=(0,m.default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var _=e.i(71259),S=e.i(33289),C=e.i(85506),A=e.i(19238);let z={login:"bg-emerald-100 text-emerald-700",logout:"bg-slate-100 text-slate-600",user_created:"bg-blue-100 text-blue-700",user_deleted:"bg-red-100 text-red-700",role_changed:"bg-violet-100 text-violet-700",user_updated:"bg-indigo-100 text-indigo-700",mail_sent:"bg-sky-100 text-sky-700"};function M(){let e=(0,l.useSearchParams)(),[m,M]=(0,s.useState)(e?.get("tab")||"general"),[T,W]=(0,s.useState)(!0),[P,E]=(0,s.useState)(!1),[O,U]=(0,s.useState)(!1),[R,D]=(0,s.useState)(""),[I,F]=(0,s.useState)(null),[H,L]=(0,s.useState)(""),[$,G]=(0,s.useState)(!1),[V,J]=(0,s.useState)({host:"",port:"587",user:"",password:"",secure:"false",from:""}),[K,B]=(0,s.useState)(null),[q,Y]=(0,s.useState)(null),[X,Z]=(0,s.useState)(null),[Q,ee]=(0,s.useState)(!1),[et,es]=(0,s.useState)(null),[el,ea]=(0,s.useState)(""),[er,ei]=(0,s.useState)([]),[eo,en]=(0,s.useState)(!1),[ed,ec]=(0,s.useState)({actor:"",action:""}),[ex,em]=(0,s.useState)({google_client_id:"",google_client_secret:"",google_callback_url:""}),[eu,eh]=(0,s.useState)(!1),[ep,eb]=(0,s.useState)(!1),[eg,ef]=(0,s.useState)(!1),[ej,ey]=(0,s.useState)({server_port:"",jwt_expires_in:"7d"}),[ev,eN]=(0,s.useState)(!1),[ew,ek]=(0,s.useState)(null),[e_,eS]=(0,s.useState)({max_file_mb:100,max_files_per_message:5,allowed_mime:"image/jpeg,image/png,image/gif,image/webp,application/pdf,text/plain,application/zip",history_days:180}),eC=(0,s.useCallback)(async()=>{en(!0);try{let e=new URLSearchParams;ed.actor&&e.set("actor",ed.actor),ed.action&&e.set("action",ed.action),e.set("limit","200");let t=await (0,a.fetchWithAuth)(`/api/audit-logs?${e}`);t.ok&&ei(await t.json())}finally{en(!1)}},[ed]);(0,s.useEffect)(()=>{"logs"===m&&eC()},[m,eC]);let eA=e=>e instanceof Error?e.message:"Unknown error",ez=(0,s.useCallback)(async()=>{W(!0);try{let e=await (0,a.fetchWithAuth)("/api/settings/general"),t=await e.json();t.api_key&&L(t.api_key);let s=await (0,a.fetchWithAuth)("/api/settings/smtp"),l=await s.json();if(l.error)throw Error(l.error);J({host:l.host,port:l.port,user:l.user,password:l.has_password?"********":"",secure:String(l.secure),from:l.from});let r=await (0,a.fetchWithAuth)("/api/settings/agent/version"),i=await r.json();i.version&&(B(i.version),Y(i.upload_date),Z(i.file_hash));let o=await (0,a.fetchWithAuth)("/api/settings/chat");if(o.ok){let e=await o.json();eS({max_file_mb:e.max_file_mb??100,max_files_per_message:e.max_files_per_message??5,allowed_mime:e.allowed_mime||"",history_days:e.history_days??180})}try{let e=await (0,a.fetchWithAuth)("/api/settings/oauth");if(e.ok){let t=await e.json();em({google_client_id:t.google_client_id||"",google_client_secret:t.has_secret?"••••••••••••••••":"",google_callback_url:t.google_callback_url||""}),eb(!!(t.google_client_id&&t.has_secret))}}catch{}try{let e=await (0,a.fetchWithAuth)("/api/settings/general");if(e.ok){let t=await e.json();ek({version:t.version,node:t.node_version,uptime:t.uptime_seconds}),ey(e=>({...e,server_port:t.server_port||"7777",jwt_expires_in:t.jwt_expires_in||"7d"}))}}catch{}}catch(e){F({type:"error",text:"Failed to load settings: "+eA(e)})}finally{W(!1)}},[]);(0,s.useEffect)(()=>{ez()},[ez]);let eM=async e=>{e.preventDefault(),E(!0),F(null);try{let e=await (0,a.fetchWithAuth)("/api/settings/smtp",{method:"PUT",body:JSON.stringify(V)}),t=await e.json();if(!e.ok)throw Error(t.error);F({type:"success",text:"SMTP Settings saved successfully!"})}catch(e){F({type:"error",text:eA(e)})}finally{E(!1)}},eT=async e=>{e.preventDefault(),E(!0),F(null);try{let e=await (0,a.fetchWithAuth)("/api/settings/chat",{method:"PUT",body:JSON.stringify(e_)}),t=await e.json();if(!e.ok)throw Error(t.error);F({type:"success",text:"Chat settings saved successfully!"})}catch(e){F({type:"error",text:eA(e)})}finally{E(!1)}},eW=async()=>{E(!0),F(null);try{let e=await (0,a.fetchWithAuth)("/api/settings/general",{method:"PUT",body:JSON.stringify({api_key:H})}),t=await e.json();if(!e.ok)throw Error(t.error);F({type:"success",text:"API Key updated successfully!"})}catch(e){F({type:"error",text:eA(e)})}finally{E(!1)}},eP=async()=>{U(!0),F(null);try{let e=await (0,a.fetchWithAuth)("/api/settings/smtp/test",{method:"POST",body:JSON.stringify({email:R})}),t=await e.json();if(!e.ok)throw Error(t.error);F({type:"success",text:t.message})}catch(e){F({type:"error",text:eA(e)})}finally{U(!1)}},eE=async()=>{if(!et||!el)return void F({type:"error",text:"Please select a file and enter a version number"});if(!/^\d+\.\d+\.\d+$/.test(el))return void F({type:"error",text:"Version must be in format X.Y.Z (e.g., 2.9.0)"});ee(!0),F(null);try{let e=new FormData;e.append("file",et),e.append("version",el);let t=await (0,a.fetchWithAuth)("/api/settings/agent/upload",{method:"POST",body:e,headers:{}}),s=await t.json();if(!t.ok)throw Error(s.error);F({type:"success",text:`Agent v${el} uploaded successfully! Hash: ${s.hash?.substring(0,16)}...`}),es(null),ea(""),B(el),Y(new Date().toISOString()),Z(s.hash)}catch(e){F({type:"error",text:eA(e)})}finally{ee(!1)}};return(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-12",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"p-3 bg-linear-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg shadow-blue-500/25",children:(0,t.jsx)(o.Server,{className:"text-white",size:28,strokeWidth:2.5})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold bg-linear-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"System Settings"}),(0,t.jsx)("p",{className:"text-slate-500 mt-1",children:"Configure global application settings."})]})]})}),I&&(0,t.jsxs)(C.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-4 rounded-2xl mb-6 flex items-center gap-2 backdrop-blur-xl border shadow-lg ${"success"===I.type?"bg-emerald-50/90 text-emerald-700 border-emerald-200/60 shadow-emerald-500/20":"bg-red-50/90 text-red-700 border-red-200/60 shadow-red-500/20"}`,children:["success"===I.type?(0,t.jsx)(c.CheckCircle,{size:20,strokeWidth:2.5}):(0,t.jsx)(d.AlertCircle,{size:20,strokeWidth:2.5}),I.text]}),(0,t.jsxs)("div",{className:"flex space-x-1 rounded-2xl bg-white/80 backdrop-blur-xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)] p-1 mb-6 w-fit",children:[(0,t.jsxs)("button",{onClick:()=>M("general"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all  duration-200 ${"general"===m?"bg-linear-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(n.Shield,{size:16,strokeWidth:2.5})," General & Security"]}),(0,t.jsxs)("button",{onClick:()=>M("smtp"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all  duration-200 ${"smtp"===m?"bg-linear-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(r.Mail,{size:16,strokeWidth:2.5})," SMTP Configuration"]}),(0,t.jsxs)("button",{onClick:()=>M("agent"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all  duration-200 ${"agent"===m?"bg-linear-to-r from-blue-500 to-purple-600  text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(f,{size:16,strokeWidth:2.5})," Agent Management"]}),(0,t.jsxs)("button",{onClick:()=>M("chat"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all  duration-200 ${"chat"===m?"bg-linear-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(N.MessageCircle,{size:16,strokeWidth:2.5})," Chat Settings"]}),(0,t.jsxs)("button",{onClick:()=>M("logs"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all  duration-200 ${"logs"===m?"bg-linear-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(j,{size:16,strokeWidth:2.5})," Activity Logs"]}),(0,t.jsxs)("button",{onClick:()=>M("oauth"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all duration-200 ${"oauth"===m?"bg-linear-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(w,{size:16,strokeWidth:2.5})," OAuth / SSO"]}),(0,t.jsxs)("button",{onClick:()=>M("config"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all duration-200 ${"config"===m?"bg-linear-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(k,{size:16,strokeWidth:2.5})," Config"]})]}),(0,t.jsxs)(A.AnimatePresence,{mode:"wait",children:["general"===m&&(0,t.jsxs)(C.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white/90 backdrop-blur-xl rounded-2xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)] overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100 bg-linear-to-r from-blue-50/50 to-purple-50/50",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold bg-linear-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-2",children:[(0,t.jsx)(u,{size:18,strokeWidth:2.5})," API Authentication"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Manage the API Key used by Agents to authenticate with the server."})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Agent API Key"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{type:$?"text":"password",value:H,onChange:e=>L(e.target.value),className:"w-full pl-10 pr-10 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"YOUR_STATIC_API_KEY_HERE"}),(0,t.jsx)(u,{className:"absolute left-3 top-2.5 text-slate-400",size:16})]}),(0,t.jsx)("button",{onClick:()=>G(!$),className:"px-3 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 text-slate-600",title:$?"Hide":"Show",children:$?"Hide":"Show"}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(H),F({type:"success",text:"API Key copied to clipboard!"}),setTimeout(()=>F(null),3e3)},className:"px-3 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 text-slate-600",title:"Copy to Clipboard",children:(0,t.jsx)(h,{size:18})}),(0,t.jsx)("button",{onClick:()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="sk_live_";for(let s=0;s<32;s++)t+=e.charAt(Math.floor(Math.random()*e.length));L(t)},className:"px-3 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 text-slate-600",title:"Generate New Key",children:(0,t.jsx)(p.RefreshCw,{size:18})})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Warning: Changing this key will disconnect all agents until they are updated with the new key."})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-slate-100",children:(0,t.jsx)("button",{onClick:eW,disabled:P||T,className:"px-6 py-2 bg-linear-to-r from-blue-600 to-purple-600 hover:shadow-lg hover:shadow-blue-500/30 text-white font-medium rounded-xl transition-all duration-200 flex items-center gap-2 disabled:opacity-50 hover:scale-[1.02]",children:P?"Saving...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Save,{size:18,strokeWidth:2.5})," Save Changes"]})})})]})]},"general"),"smtp"===m&&(0,t.jsxs)(C.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white/90 backdrop-blur-xl rounded-2xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)] overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100 bg-linear-to-r from-blue-50/50 to-purple-50/50",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold bg-linear-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-2",children:[(0,t.jsx)(r.Mail,{size:18,strokeWidth:2.5})," SMTP Configuration"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Configure email server settings for notifications and password resets."})]}),(0,t.jsxs)("form",{onSubmit:eM,className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"SMTP Host"}),(0,t.jsx)("input",{type:"text",value:V.host,onChange:e=>J({...V,host:e.target.value}),placeholder:"smtp.example.com",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Port"}),(0,t.jsx)("input",{type:"number",value:V.port,onChange:e=>J({...V,port:e.target.value}),placeholder:"587",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Username"}),(0,t.jsx)("input",{type:"text",value:V.user,onChange:e=>J({...V,user:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),(0,t.jsx)("input",{type:"password",value:V.password,onChange:e=>J({...V,password:e.target.value}),placeholder:"••••••••",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Encryption (Secure)"}),(0,t.jsxs)("select",{value:V.secure,onChange:e=>J({...V,secure:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[(0,t.jsx)("option",{value:"false",children:"false (TLS - Port 587)"}),(0,t.jsx)("option",{value:"true",children:"true (SSL - Port 465)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"From Email"}),(0,t.jsx)("input",{type:"text",value:V.from,onChange:e=>J({...V,from:e.target.value}),placeholder:'"SysTracker" <no-reply@example.com>',className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"mt-8 pt-8 border-t border-slate-100 italic",children:[(0,t.jsx)("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3",children:"Diagnostic Tool"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 items-end",children:[(0,t.jsxs)("div",{className:"flex-1 w-full",children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 mb-1 uppercase",children:"Test Recipient"}),(0,t.jsx)("input",{type:"email",value:R,onChange:e=>D(e.target.value),placeholder:"Enter recipient email...",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),(0,t.jsx)("button",{type:"button",onClick:eP,disabled:O||T,className:"w-full sm:w-auto px-4 py-2 bg-slate-900 hover:bg-black text-white text-xs font-bold rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:O?"Sending...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Send,{size:14})," Send Test"]})})]}),(0,t.jsxs)("p",{className:"text-[10px] text-slate-400 mt-2",children:["Specify a recipient to verify connection. SMTP settings must be ",(0,t.jsx)("strong",{children:"saved"})," before testing."]})]}),(0,t.jsx)("div",{className:"flex items-center justify-end pt-6 border-t border-slate-100 mt-6",children:(0,t.jsx)("button",{type:"submit",disabled:P||T,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:P?"Saving...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Save,{size:18})," Save Settings"]})})})]})]},"smtp"),"agent"===m&&(0,t.jsxs)(C.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(f,{size:18,className:"text-slate-400"})," Agent Auto-Updater"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Manage agent releases. Connected agents will automatically update to the latest version."})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"bg-linear-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wider mb-2",children:"Currently Distributed Version"}),K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-3xl font-bold text-slate-800 mb-1",children:["v",K]}),(0,t.jsxs)("p",{className:"text-sm text-slate-500 mb-3",children:["Uploaded ",q?new Date(q).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Unknown"]}),X&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"bg-white/80 rounded-lg px-3 py-1.5 border border-blue-200",children:[(0,t.jsx)("p",{className:"text-[10px] font-semibold text-blue-600 uppercase tracking-wider mb-0.5",children:"SHA256 Hash"}),(0,t.jsxs)("p",{className:"text-xs font-mono text-slate-700",children:[X.substring(0,16),"...",X.substring(X.length-8)]})]}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(X),F({type:"success",text:"Hash copied to clipboard!"}),setTimeout(()=>F(null),2e3)},className:"p-2 bg-white/80 hover:bg-white rounded-lg border border-blue-200 text-blue-600 transition-colors",title:"Copy full hash",children:(0,t.jsx)(h,{size:14})})]})]}):(0,t.jsx)("p",{className:"text-slate-500",children:"No agent release uploaded yet"})]}),(0,t.jsx)("div",{className:"bg-white/80 backdrop-blur-sm p-3 rounded-lg shadow-sm",children:(0,t.jsx)(b,{className:"text-blue-600",size:24})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Upload New Agent Release"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Agent Executable File (.exe)"}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("input",{type:"file",accept:".exe",onChange:e=>es(e.target.files?.[0]||null),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100 transition-colors"})}),et&&(0,t.jsxs)("p",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[(0,t.jsx)(c.CheckCircle,{size:12,className:"text-green-600"}),"Selected: ",et.name," (",(et.size/1024/1024).toFixed(2)," MB)"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Semantic Version Number"}),(0,t.jsx)("input",{type:"text",value:el,onChange:e=>ea(e.target.value),placeholder:"2.9.0",pattern:"\\d+\\.\\d+\\.\\d+",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Format: X.Y.Z (e.g., 2.9.0). Agents will automatically update if their version is lower."})]}),(0,t.jsx)("button",{onClick:eE,disabled:Q||!et||!el,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-blue-200",children:Q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.RefreshCw,{size:18,className:"animate-spin"}),"Uploading..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Upload,{size:18}),"Upload Agent Release"]})})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(c.CheckCircle,{size:18,className:"text-emerald-600 shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-emerald-900 mb-1",children:"Built-in Safety Mechanisms"}),(0,t.jsxs)("ul",{className:"text-xs text-emerald-800 space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"SHA256 Hash Verification"})," - Every download is verified for integrity"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Automatic Backup"})," - Old version is saved before updating"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Smart Rollback"})," - Auto-restores if new version fails to start"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"File Size Check"})," - Ensures complete download before installing"]})]})]})]})}),(0,t.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(d.AlertCircle,{size:18,className:"text-amber-600 shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-amber-900 mb-1",children:"How Auto-Updates Work"}),(0,t.jsxs)("ul",{className:"text-xs text-amber-800 space-y-1",children:[(0,t.jsx)("li",{children:"• Agents check for updates every 60 minutes"}),(0,t.jsx)("li",{children:"• If a newer version is available, the agent downloads and verifies it"}),(0,t.jsx)("li",{children:"• Update installs automatically with backup/rollback protection"}),(0,t.jsx)("li",{children:"• No remote desktop session or manual intervention required"})]})]})]})})]})]})]},"agent"),"chat"===m&&(0,t.jsxs)(C.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(N.MessageCircle,{size:18,className:"text-slate-400"})," Chat Settings"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Configure file limits, allowed types, and retention for chat."})]}),(0,t.jsxs)("form",{onSubmit:eT,className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Max File Size (MB)"}),(0,t.jsx)("input",{type:"number",min:1,value:e_.max_file_mb,onChange:e=>eS({...e_,max_file_mb:Number(e.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Max Files Per Message"}),(0,t.jsx)("input",{type:"number",min:1,value:e_.max_files_per_message,onChange:e=>eS({...e_,max_files_per_message:Number(e.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Message Retention (days)"}),(0,t.jsx)("input",{type:"number",min:1,value:e_.history_days,onChange:e=>eS({...e_,history_days:Number(e.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Allowed MIME Types"}),(0,t.jsx)("input",{type:"text",value:e_.allowed_mime,onChange:e=>eS({...e_,allowed_mime:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"image/jpeg,image/png,application/pdf"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Comma-separated list of allowed file types."})]})]}),(0,t.jsx)("div",{className:"flex items-center justify-end pt-6 border-t border-slate-100",children:(0,t.jsx)("button",{type:"submit",disabled:P||T,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:P?"Saving...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Save,{size:18})," Save Chat Settings"]})})})]})]},"chat"),"logs"===m&&(0,t.jsxs)(C.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(j,{size:18,className:"text-slate-400"})," Activity Logs"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"User & system activity for the last 45 days. Older entries are purged automatically."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:eC,disabled:eo,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-500",title:"Refresh",children:(0,t.jsx)(p.RefreshCw,{size:16,className:eo?"animate-spin":""})}),(0,t.jsxs)("button",{onClick:()=>{let e=new Blob([[["ID","Actor","Action","Target","Detail","IP","Timestamp"],...er.map(e=>[e.id,e.actor,e.action,e.target||"",e.detail||"",e.ip||"",e.ts])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=`systracker-audit-${new Date().toISOString().slice(0,10)}.csv`,t.click()},disabled:0===er.length,className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg border border-slate-200 transition-colors disabled:opacity-50",children:[(0,t.jsx)(b,{size:15})," Export CSV"]})]})]}),(0,t.jsxs)("div",{className:"px-6 py-3 border-b border-slate-100 flex items-center gap-3 bg-slate-50/50",children:[(0,t.jsx)(y,{size:14,className:"text-slate-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Filter by actor...",value:ed.actor,onChange:e=>ec({...ed,actor:e.target.value}),className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400/40 w-40"}),(0,t.jsxs)("select",{value:ed.action,onChange:e=>ec({...ed,action:e.target.value}),className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 focus:outline-none bg-white focus:ring-2 focus:ring-blue-400/40",children:[(0,t.jsx)("option",{value:"",children:"All actions"}),(0,t.jsx)("option",{value:"login",children:"login"}),(0,t.jsx)("option",{value:"logout",children:"logout"}),(0,t.jsx)("option",{value:"user_created",children:"user_created"}),(0,t.jsx)("option",{value:"user_deleted",children:"user_deleted"}),(0,t.jsx)("option",{value:"role_changed",children:"role_changed"}),(0,t.jsx)("option",{value:"user_updated",children:"user_updated"}),(0,t.jsx)("option",{value:"mail_sent",children:"mail_sent"})]}),(0,t.jsx)("button",{onClick:eC,className:"px-3 py-1.5 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Apply"}),(ed.actor||ed.action)&&(0,t.jsx)("button",{onClick:()=>ec({actor:"",action:""}),className:"text-slate-400 hover:text-slate-600",children:(0,t.jsx)(v.X,{size:14})})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:eo?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(p.RefreshCw,{size:20,className:"text-blue-400 animate-spin"})}):0===er.length?(0,t.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,t.jsx)(j,{size:32,className:"mx-auto mb-2 opacity-30"}),(0,t.jsx)("p",{className:"text-sm",children:"No audit logs found"})]}):(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"border-b border-slate-100",children:(0,t.jsx)("tr",{children:["Actor","Action","Target","Detail","IP","Time"].map(e=>(0,t.jsx)("th",{className:"text-left px-4 py-2.5 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:e},e))})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-50",children:er.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-2.5 font-medium text-slate-800",children:e.actor}),(0,t.jsx)("td",{className:"px-4 py-2.5",children:(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${z[e.action]||"bg-slate-100 text-slate-600"}`,children:e.action})}),(0,t.jsx)("td",{className:"px-4 py-2.5 text-slate-600 max-w-30 truncate",children:e.target||"—"}),(0,t.jsx)("td",{className:"px-4 py-2.5 text-slate-500 max-w-40 truncate text-xs",children:e.detail||"—"}),(0,t.jsx)("td",{className:"px-4 py-2.5 text-slate-400 font-mono text-xs",children:e.ip||"—"}),(0,t.jsx)("td",{className:"px-4 py-2.5 text-slate-400 text-xs whitespace-nowrap",children:new Date(e.ts).toLocaleString()})]},e.id))})]})})]},"logs"),"oauth"===m&&(0,t.jsxs)(C.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white/90 backdrop-blur-xl rounded-2xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)] overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100 bg-linear-to-r from-blue-50/50 to-purple-50/50",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold bg-linear-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-2",children:[(0,t.jsx)(w,{size:18,strokeWidth:2.5})," OAuth / Single Sign-On"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Configure Google OAuth to allow users to sign in with their Google account."})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold ${ep?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:[(0,t.jsx)("span",{className:`w-1.5 h-1.5 rounded-full ${ep?"bg-emerald-500":"bg-slate-400"}`}),ep?"Google Sign-In Enabled":"Google Sign-In Disabled"]}),(0,t.jsx)("span",{className:"text-xs text-slate-400",children:"Configure below to enable Google login on the sign-in page"})]}),(0,t.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-100 text-sm text-blue-700 space-y-1",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Setup Instructions:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-blue-600 text-xs",children:[(0,t.jsxs)("li",{children:["Go to ",(0,t.jsx)("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"Google Cloud Console"})," and create a project"]}),(0,t.jsxs)("li",{children:["Enable the ",(0,t.jsx)("span",{className:"font-mono bg-blue-100 px-1 rounded",children:"Google OAuth 2.0"})," API"]}),(0,t.jsx)("li",{children:"Create OAuth credentials (Web Application) and add the callback URL below to Authorized redirect URIs"}),(0,t.jsx)("li",{children:"Copy the Client ID and Client Secret here"})]})]}),(0,t.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),ef(!0),F(null);try{let e=ex.google_client_secret.includes("•")?"":ex.google_client_secret,t=await (0,a.fetchWithAuth)("/api/settings/oauth",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ex,google_client_secret:e})});if(t.ok)F({type:"success",text:"OAuth settings saved successfully."}),eb(!!(ex.google_client_id&&(e||ex.google_client_secret.includes("•"))));else{let e=await t.json();F({type:"error",text:e.error||"Failed to save OAuth settings."})}}catch{F({type:"error",text:"Network error saving OAuth settings."})}finally{ef(!1)}},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Google Client ID"}),(0,t.jsx)("input",{type:"text",value:ex.google_client_id,onChange:e=>em(t=>({...t,google_client_id:e.target.value})),placeholder:"1234567890-abcdefghijklmnop.apps.googleusercontent.com",className:"w-full px-4 py-2.5 rounded-xl bg-white border border-slate-200 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-400 font-mono"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Google Client Secret"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:eu?"text":"password",value:ex.google_client_secret,onChange:e=>em(t=>({...t,google_client_secret:e.target.value})),placeholder:"GOCSPX-...",className:"w-full px-4 py-2.5 pr-10 rounded-xl bg-white border border-slate-200 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-400 font-mono"}),(0,t.jsx)("button",{type:"button",onClick:()=>eh(e=>!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:eu?(0,t.jsx)(S.EyeOff,{size:16}):(0,t.jsx)(_.Eye,{size:16})})]}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Leave blank to keep the existing secret unchanged."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Callback URL"}),(0,t.jsx)("input",{type:"text",value:ex.google_callback_url,onChange:e=>em(t=>({...t,google_callback_url:e.target.value})),placeholder:"https://your-server.com/api/auth/google/callback",className:"w-full px-4 py-2.5 rounded-xl bg-white border border-slate-200 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-400 font-mono"}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Must match exactly what you entered in the Google Cloud Console."})]}),(0,t.jsx)("div",{className:"flex justify-end pt-2",children:(0,t.jsxs)("button",{type:"submit",disabled:eg,className:"flex items-center gap-2 px-5 py-2.5 bg-linear-to-r from-blue-500 to-purple-600 text-white text-sm font-medium rounded-xl hover:opacity-90 disabled:opacity-50 transition-all",children:[eg?(0,t.jsx)(p.RefreshCw,{size:16,className:"animate-spin"}):(0,t.jsx)(i.Save,{size:16}),eg?"Saving…":"Save OAuth Settings"]})})]})]})]},"oauth"),"config"===m&&(0,t.jsxs)(C.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"space-y-6",children:[ew&&(0,t.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)] p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold bg-linear-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-2 mb-4",children:[(0,t.jsx)(o.Server,{size:18,strokeWidth:2.5})," Server Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[ew.version&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Server Version"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-700 font-mono",children:ew.version})]}),ew.node&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Node.js Version"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-700 font-mono",children:ew.node})]}),void 0!==ew.uptime&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 mb-1",children:"Uptime"}),(0,t.jsxs)("p",{className:"text-sm font-semibold text-slate-700",children:[Math.floor((ew.uptime||0)/3600),"h ",Math.floor((ew.uptime||0)%3600/60),"m"]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)] overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100 bg-linear-to-r from-blue-50/50 to-purple-50/50",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold bg-linear-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-2",children:[(0,t.jsx)(k,{size:18,strokeWidth:2.5})," Runtime Configuration"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"These settings are applied to the server. Restart the server after changing port."})]}),(0,t.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),eN(!0),F(null);try{let e=await (0,a.fetchWithAuth)("/api/settings/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ej)});if(e.ok)F({type:"success",text:"Config saved. Restart the server for port changes to take effect."});else{let t=await e.json();F({type:"error",text:t.error||"Failed to save config."})}}catch{F({type:"error",text:"Network error saving config."})}finally{eN(!1)}},className:"p-6 space-y-5",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Server Port"}),(0,t.jsx)("input",{type:"number",min:"1024",max:"65535",value:ej.server_port,onChange:e=>ey(t=>({...t,server_port:e.target.value})),className:"w-full px-4 py-2.5 rounded-xl bg-white border border-slate-200 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-400 font-mono"}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Default: 7777. Requires server restart."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"JWT Token Expiry"}),(0,t.jsxs)("select",{value:ej.jwt_expires_in,onChange:e=>ey(t=>({...t,jwt_expires_in:e.target.value})),className:"w-full px-4 py-2.5 rounded-xl bg-white border border-slate-200 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-400",children:[(0,t.jsx)("option",{value:"1d",children:"1 Day"}),(0,t.jsx)("option",{value:"7d",children:"7 Days"}),(0,t.jsx)("option",{value:"14d",children:"14 Days"}),(0,t.jsx)("option",{value:"30d",children:"30 Days"}),(0,t.jsx)("option",{value:"90d",children:"90 Days"}),(0,t.jsx)("option",{value:"365d",children:"1 Year"})]}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"How long dashboard sessions stay active."})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-amber-700 mb-2",children:"Environment Variables (read-only)"}),(0,t.jsxs)("div",{className:"space-y-1.5 text-xs font-mono text-amber-600",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"JWT_SECRET"}),(0,t.jsx)("span",{className:"text-slate-400",children:"••••••••••••••••"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"NODE_ENV"}),(0,t.jsx)("span",{className:"text-slate-500",children:"production"})]})]}),(0,t.jsx)("p",{className:"text-xs text-amber-600 mt-2",children:"Sensitive values are managed via environment variables and cannot be changed from the UI."})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)("button",{type:"submit",disabled:ev,className:"flex items-center gap-2 px-5 py-2.5 bg-linear-to-r from-blue-500 to-purple-600 text-white text-sm font-medium rounded-xl hover:opacity-90 disabled:opacity-50 transition-all",children:[ev?(0,t.jsx)(p.RefreshCw,{size:16,className:"animate-spin"}):(0,t.jsx)(i.Save,{size:16}),ev?"Saving…":"Save Config"]})})]})]})]},"config")]})]})}function T(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 pt-24 text-slate-500",children:"Loading..."}),children:(0,t.jsx)(M,{})})}e.s(["default",()=>T],72141)}]);