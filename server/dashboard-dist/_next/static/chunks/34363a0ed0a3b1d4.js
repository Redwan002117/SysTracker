(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38036,e=>{"use strict";let t="systracker_token",r="systracker_username",s="systracker_role";function a(){return localStorage.getItem(t)}function i(e,a,l="admin"){localStorage.setItem(t,e),localStorage.setItem(r,a),localStorage.setItem(s,l)}function l(){localStorage.removeItem(t),localStorage.removeItem(r),localStorage.removeItem(s)}function n(){return localStorage.getItem(r)}function o(){return localStorage.getItem(s)||"admin"}function c(){return"admin"===o()}function u(){return"viewer"===o()}function d(){let e=a();return!!e&&!function(e){try{let t=JSON.parse(atob(e.split(".")[1]));return 1e3*t.exp<Date.now()}catch{return!0}}(e)}async function p(e,t={}){let r=a();return fetch(e,{...t,headers:{"Content-Type":"application/json",...t.headers||{},...r?{Authorization:`Bearer ${r}`}:{}}})}e.s(["clearToken",()=>l,"fetchWithAuth",()=>p,"getRole",()=>o,"getToken",()=>a,"getUsername",()=>n,"isAdmin",()=>c,"isAuthenticated",()=>d,"isViewer",()=>u,"setToken",()=>i])},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),s=e.i(31178),a=e.i(47414),i=e.i(74008),l=e.i(21476),n=e.i(72846),o=r,c=e.i(37806);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class d extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,r=(0,n.isHTMLElement)(e)&&e.offsetWidth||0,s=(0,n.isHTMLElement)(e)&&e.offsetHeight||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left,a.bottom=s-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function p({children:e,isPresent:s,anchorX:a,anchorY:i,root:l,pop:n}){let p=(0,o.useId)(),h=(0,o.useRef)(null),m=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:f}=(0,o.useContext)(c.MotionConfigContext),x=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,s=e.map(e=>{let s=u(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():u(e[t],null)}}}}(...e),e)}(h,e.props?.ref??e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:o,right:c,bottom:u}=m.current;if(s||!1===n||!h.current||!e||!t)return;let d="left"===a?`left: ${o}`:`right: ${c}`,x="bottom"===i?`bottom: ${u}`:`top: ${r}`;h.current.dataset.motionPopId=p;let g=document.createElement("style");f&&(g.nonce=f);let b=l??document.head;return b.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${d}px !important;
            ${x}px !important;
          }
        `),()=>{b.contains(g)&&b.removeChild(g)}},[s]),(0,t.jsx)(d,{isPresent:s,childRef:h,sizeRef:m,pop:n,children:!1===n?e:o.cloneElement(e,{ref:x})})}let h=({children:e,initial:s,isPresent:i,onExitComplete:n,custom:o,presenceAffectsLayout:c,mode:u,anchorX:d,anchorY:h,root:f})=>{let x=(0,a.useConstant)(m),g=(0,r.useId)(),b=!0,y=(0,r.useMemo)(()=>(b=!1,{id:g,initial:s,isPresent:i,custom:o,onExitComplete:e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;n&&n()},register:e=>(x.set(e,!1),()=>x.delete(e))}),[i,x,n]);return c&&b&&(y={...y}),(0,r.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[i]),r.useEffect(()=>{i||x.size||!n||n()},[i]),e=(0,t.jsx)(p,{pop:"popLayout"===u,isPresent:i,anchorX:d,anchorY:h,root:f,children:e}),(0,t.jsx)(l.PresenceContext.Provider,{value:y,children:e})};function m(){return new Map}var f=e.i(64978);let x=e=>e.key||"";function g(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let b=({children:e,custom:l,initial:n=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:u="sync",propagate:d=!1,anchorX:p="left",anchorY:m="top",root:b})=>{let[y,v]=(0,f.usePresence)(d),w=(0,r.useMemo)(()=>g(e),[e]),j=d&&!y?[]:w.map(x),N=(0,r.useRef)(!0),k=(0,r.useRef)(w),C=(0,a.useConstant)(()=>new Map),S=(0,r.useRef)(new Set),[z,P]=(0,r.useState)(w),[A,L]=(0,r.useState)(w);(0,i.useIsomorphicLayoutEffect)(()=>{N.current=!1,k.current=w;for(let e=0;e<A.length;e++){let t=x(A[e]);j.includes(t)?(C.delete(t),S.current.delete(t)):!0!==C.get(t)&&C.set(t,!1)}},[A,j.length,j.join("-")]);let R=[];if(w!==z){let e=[...w];for(let t=0;t<A.length;t++){let r=A[t],s=x(r);j.includes(s)||(e.splice(t,0,r),R.push(r))}return"wait"===u&&R.length&&(e=R),L(g(e)),P(w),null}let{forceRender:E}=(0,r.useContext)(s.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:A.map(e=>{let r=x(e),s=(!d||!!y)&&(w===A||j.includes(r));return(0,t.jsx)(h,{isPresent:s,initial:(!N.current||!!n)&&void 0,custom:l,presenceAffectsLayout:c,mode:u,root:b,onExitComplete:s?void 0:()=>{if(S.current.has(r)||(S.current.add(r),!C.has(r)))return;C.set(r,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(E?.(),L(k.current),d&&v?.(),o&&o())},anchorX:p,anchorY:m,children:e},r)})})};e.s(["AnimatePresence",()=>b],88653)},75254,e=>{"use strict";var t=e.i(71645);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:n="",children:o,iconNode:c,...u},d)=>(0,t.createElement)("svg",{ref:d,...a,width:s,height:s,stroke:e,strokeWidth:l?24*Number(i)/Number(s):i,className:r("lucide",n),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),l=(e,a)=>{let l=(0,t.forwardRef)(({className:l,...n},o)=>(0,t.createElement)(i,{ref:o,iconNode:a,className:r(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...n}));return l.displayName=s(e),l};e.s(["default",()=>l],75254)},18566,(e,t,r)=>{t.exports=e.r(76562)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},70756,e=>{"use strict";let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},81950,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(46932),i=e.i(88653),l=e.i(31278),n=e.i(63209),o=e.i(69638),c=e.i(70756),u=e.i(84614),d=e.i(63488);let p=(0,e.i(75254).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var h=e.i(72520),m=e.i(38036);function f(){let e=(0,s.useRouter)(),[f,x]=(0,r.useState)({username:"admin",email:"",password:"",confirmPassword:""}),[g,b]=(0,r.useState)("idle"),[y,v]=(0,r.useState)(""),[w,j]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(0,m.isAuthenticated)()?e.replace("/dashboard"):fetch("/api/auth/status").then(e=>e.json()).then(t=>{t.setup_required?j(!1):e.replace("/login")}).catch(()=>{j(!1)})},[e]);let N=async t=>{if(t.preventDefault(),f.password!==f.confirmPassword){v("Passwords do not match"),b("error");return}if(f.password.length<8){v("Password must be at least 8 characters"),b("error");return}b("loading"),v("");try{let t=await fetch("/api/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:f.username,email:f.email,password:f.password})}),r=await t.json();if(!t.ok){b("error"),v(r.error||"Setup failed");return}b("success"),setTimeout(()=>e.replace("/login"),2e3)}catch{b("error"),v("Connection error. Is the server running?")}};return w?(0,t.jsx)("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:(0,t.jsx)(l.Loader2,{size:32,className:"animate-spin text-blue-500"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center px-4 relative overflow-hidden font-sans",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-indigo-900/20 via-slate-950 to-blue-900/20"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.03)_1px,transparent_1px)] bg-[size:32px_32px] pointer-events-none opacity-20"}),(0,t.jsx)("div",{className:"relative z-10 w-full max-w-lg",children:(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,t.jsxs)("div",{className:"text-center mb-10",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center p-4 bg-blue-600/20 rounded-full mb-6 border border-blue-500/30 shadow-[0_0_30px_rgba(59,130,246,0.2)]",children:(0,t.jsx)(p,{size:32,className:"text-blue-400"})}),(0,t.jsx)("h1",{className:"text-4xl font-extrabold text-white mb-3 tracking-tight",children:"Welcome to SysTracker"}),(0,t.jsx)("p",{className:"text-slate-400 text-lg",children:"Let's create your admin account to get started."})]}),(0,t.jsxs)("div",{className:"bg-slate-900/80 backdrop-blur-2xl border border-white/10 rounded-3xl p-8 shadow-2xl relative overflow-hidden group",children:[(0,t.jsx)("div",{className:"absolute -top-24 -right-24 w-48 h-48 bg-blue-500/20 rounded-full blur-3xl pointer-events-none group-hover:bg-blue-500/30 transition-all duration-700"}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-5 relative z-10",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-300 ml-1",children:"Username"}),(0,t.jsxs)("div",{className:"relative group/input",children:[(0,t.jsx)(u.User,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within/input:text-blue-400 transition-colors"}),(0,t.jsx)("input",{type:"text",required:!0,value:f.username,onChange:e=>x(t=>({...t,username:e.target.value})),className:"w-full pl-11 pr-4 py-3 bg-slate-950/50 border border-slate-700 rounded-xl text-white placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all",placeholder:"admin"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-300 ml-1",children:"Email"}),(0,t.jsxs)("div",{className:"relative group/input",children:[(0,t.jsx)(d.Mail,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within/input:text-blue-400 transition-colors"}),(0,t.jsx)("input",{type:"email",required:!0,value:f.email,onChange:e=>x(t=>({...t,email:e.target.value})),className:"w-full pl-11 pr-4 py-3 bg-slate-950/50 border border-slate-700 rounded-xl text-white placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all",placeholder:"admin@example.com"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-300 ml-1",children:"Password"}),(0,t.jsxs)("div",{className:"relative group/input",children:[(0,t.jsx)(c.Lock,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within/input:text-blue-400 transition-colors"}),(0,t.jsx)("input",{type:"password",required:!0,value:f.password,onChange:e=>x(t=>({...t,password:e.target.value})),className:"w-full pl-11 pr-4 py-3 bg-slate-950/50 border border-slate-700 rounded-xl text-white placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all",placeholder:"••••••••"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-300 ml-1",children:"Confirm Password"}),(0,t.jsxs)("div",{className:"relative group/input",children:[(0,t.jsx)(c.Lock,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within/input:text-blue-400 transition-colors"}),(0,t.jsx)("input",{type:"password",required:!0,value:f.confirmPassword,onChange:e=>x(t=>({...t,confirmPassword:e.target.value})),className:"w-full pl-11 pr-4 py-3 bg-slate-950/50 border border-slate-700 rounded-xl text-white placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all",placeholder:"••••••••"})]})]}),(0,t.jsxs)(i.AnimatePresence,{mode:"wait",children:["error"===g&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-red-500/10 border border-red-500/20 text-red-200 text-sm p-4 rounded-xl flex items-center gap-3 overflow-hidden",children:[(0,t.jsx)(n.AlertCircle,{size:20,className:"shrink-0 text-red-400"}),y]}),"success"===g&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-green-500/10 border border-green-500/20 text-green-200 text-sm p-4 rounded-xl flex items-center gap-3 overflow-hidden",children:[(0,t.jsx)(o.CheckCircle,{size:20,className:"shrink-0 text-green-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-green-300",children:"Account created successfully!"}),(0,t.jsx)("p",{className:"text-green-400/80 text-xs mt-0.5",children:"Redirecting to login..."})]})]})]}),(0,t.jsxs)("button",{type:"submit",disabled:"loading"===g||"success"===g,className:"w-full group relative flex items-center justify-center gap-2 py-4 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold shadow-lg shadow-blue-500/25 transition-all hover:shadow-blue-500/40 hover:-translate-y-0.5 disabled:opacity-70 disabled:pointer-events-none overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 pointer-events-none"}),"loading"===g?(0,t.jsx)(l.Loader2,{size:20,className:"animate-spin"}):(0,t.jsxs)(t.Fragment,{children:["Complete Setup",(0,t.jsx)(h.ArrowRight,{size:18,className:"group-hover:translate-x-1 transition-transform"})]})]})]})]}),(0,t.jsx)("p",{className:"text-center mt-8 text-slate-500 text-sm",children:"SysTracker v2.5.5-setup"})]})})]})}function x(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-slate-900"}),children:(0,t.jsx)(f,{})})}e.s(["default",()=>x],81950)}]);