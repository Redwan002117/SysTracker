(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98919,e=>{"use strict";let t=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],98919)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},16715,e=>{"use strict";let t=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],69074)},18393,e=>{"use strict";let t=(0,e.i(75254).default)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);e.s(["Server",()=>t],18393)},41507,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(38036),r=e.i(63488),i=e.i(56909),o=e.i(18393),n=e.i(98919),d=e.i(63209),c=e.i(69638),x=e.i(14764),u=e.i(75254);let m=(0,u.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),h=(0,u.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var p=e.i(16715);let b=(0,u.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var g=e.i(69074);let f=(0,u.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),y=(0,u.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),j=(0,u.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var v=e.i(37727),w=e.i(94983),N=e.i(46932),k=e.i(88653);let S={login:"bg-emerald-100 text-emerald-700",logout:"bg-slate-100 text-slate-600",user_created:"bg-blue-100 text-blue-700",user_deleted:"bg-red-100 text-red-700",role_changed:"bg-violet-100 text-violet-700",user_updated:"bg-indigo-100 text-indigo-700",mail_sent:"bg-sky-100 text-sky-700"};function C(){let e=(0,a.useSearchParams)(),[u,C]=(0,s.useState)(e?.get("tab")||"general"),[_,A]=(0,s.useState)(!0),[z,M]=(0,s.useState)(!1),[T,P]=(0,s.useState)(!1),[U,W]=(0,s.useState)(""),[E,H]=(0,s.useState)(null),[R,F]=(0,s.useState)(""),[L,I]=(0,s.useState)(!1),[O,D]=(0,s.useState)({host:"",port:"587",user:"",password:"",secure:"false",from:""}),[V,$]=(0,s.useState)(null),[q,K]=(0,s.useState)(null),[B,J]=(0,s.useState)(null),[X,Y]=(0,s.useState)(!1),[G,Z]=(0,s.useState)(null),[Q,ee]=(0,s.useState)(""),[et,es]=(0,s.useState)([]),[ea,el]=(0,s.useState)(!1),[er,ei]=(0,s.useState)({actor:"",action:""}),[eo,en]=(0,s.useState)({max_file_mb:100,max_files_per_message:5,allowed_mime:"image/jpeg,image/png,image/gif,image/webp,application/pdf,text/plain,application/zip",history_days:180}),ed=(0,s.useCallback)(async()=>{el(!0);try{let e=new URLSearchParams;er.actor&&e.set("actor",er.actor),er.action&&e.set("action",er.action),e.set("limit","200");let t=await (0,l.fetchWithAuth)(`/api/audit-logs?${e}`);t.ok&&es(await t.json())}finally{el(!1)}},[er]);(0,s.useEffect)(()=>{"logs"===u&&ed()},[u,ed]);let ec=e=>e instanceof Error?e.message:"Unknown error",ex=(0,s.useCallback)(async()=>{A(!0);try{let e=await (0,l.fetchWithAuth)("/api/settings/general"),t=await e.json();t.api_key&&F(t.api_key);let s=await (0,l.fetchWithAuth)("/api/settings/smtp"),a=await s.json();if(a.error)throw Error(a.error);D({host:a.host,port:a.port,user:a.user,password:a.has_password?"********":"",secure:String(a.secure),from:a.from});let r=await (0,l.fetchWithAuth)("/api/settings/agent/version"),i=await r.json();i.version&&($(i.version),K(i.upload_date),J(i.file_hash));let o=await (0,l.fetchWithAuth)("/api/settings/chat");if(o.ok){let e=await o.json();en({max_file_mb:e.max_file_mb??100,max_files_per_message:e.max_files_per_message??5,allowed_mime:e.allowed_mime||"",history_days:e.history_days??180})}}catch(e){H({type:"error",text:"Failed to load settings: "+ec(e)})}finally{A(!1)}},[]);(0,s.useEffect)(()=>{ex()},[ex]);let eu=async e=>{e.preventDefault(),M(!0),H(null);try{let e=await (0,l.fetchWithAuth)("/api/settings/smtp",{method:"PUT",body:JSON.stringify(O)}),t=await e.json();if(!e.ok)throw Error(t.error);H({type:"success",text:"SMTP Settings saved successfully!"})}catch(e){H({type:"error",text:ec(e)})}finally{M(!1)}},em=async e=>{e.preventDefault(),M(!0),H(null);try{let e=await (0,l.fetchWithAuth)("/api/settings/chat",{method:"PUT",body:JSON.stringify(eo)}),t=await e.json();if(!e.ok)throw Error(t.error);H({type:"success",text:"Chat settings saved successfully!"})}catch(e){H({type:"error",text:ec(e)})}finally{M(!1)}},eh=async()=>{M(!0),H(null);try{let e=await (0,l.fetchWithAuth)("/api/settings/general",{method:"PUT",body:JSON.stringify({api_key:R})}),t=await e.json();if(!e.ok)throw Error(t.error);H({type:"success",text:"API Key updated successfully!"})}catch(e){H({type:"error",text:ec(e)})}finally{M(!1)}},ep=async()=>{P(!0),H(null);try{let e=await (0,l.fetchWithAuth)("/api/settings/smtp/test",{method:"POST",body:JSON.stringify({email:U})}),t=await e.json();if(!e.ok)throw Error(t.error);H({type:"success",text:t.message})}catch(e){H({type:"error",text:ec(e)})}finally{P(!1)}},eb=async()=>{if(!G||!Q)return void H({type:"error",text:"Please select a file and enter a version number"});if(!/^\d+\.\d+\.\d+$/.test(Q))return void H({type:"error",text:"Version must be in format X.Y.Z (e.g., 2.9.0)"});Y(!0),H(null);try{let e=new FormData;e.append("file",G),e.append("version",Q);let t=await (0,l.fetchWithAuth)("/api/settings/agent/upload",{method:"POST",body:e,headers:{}}),s=await t.json();if(!t.ok)throw Error(s.error);H({type:"success",text:`Agent v${Q} uploaded successfully! Hash: ${s.hash?.substring(0,16)}...`}),Z(null),ee(""),$(Q),K(new Date().toISOString()),J(s.hash)}catch(e){H({type:"error",text:ec(e)})}finally{Y(!1)}};return(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-12",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-lg shadow-blue-500/25",children:(0,t.jsx)(o.Server,{className:"text-white",size:28,strokeWidth:2.5})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"System Settings"}),(0,t.jsx)("p",{className:"text-slate-500 mt-1",children:"Configure global application settings."})]})]})}),E&&(0,t.jsxs)(N.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-4 rounded-2xl mb-6 flex items-center gap-2 backdrop-blur-xl border shadow-lg ${"success"===E.type?"bg-emerald-50/90 text-emerald-700 border-emerald-200/60 shadow-emerald-500/20":"bg-red-50/90 text-red-700 border-red-200/60 shadow-red-500/20"}`,children:["success"===E.type?(0,t.jsx)(c.CheckCircle,{size:20,strokeWidth:2.5}):(0,t.jsx)(d.AlertCircle,{size:20,strokeWidth:2.5}),E.text]}),(0,t.jsxs)("div",{className:"flex space-x-1 rounded-2xl bg-white/80 backdrop-blur-xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)] p-1 mb-6 w-fit",children:[(0,t.jsxs)("button",{onClick:()=>C("general"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all  duration-200 ${"general"===u?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(n.Shield,{size:16,strokeWidth:2.5})," General & Security"]}),(0,t.jsxs)("button",{onClick:()=>C("smtp"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all  duration-200 ${"smtp"===u?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(r.Mail,{size:16,strokeWidth:2.5})," SMTP Configuration"]}),(0,t.jsxs)("button",{onClick:()=>C("agent"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all  duration-200 ${"agent"===u?"bg-gradient-to-r from-blue-500 to-purple-600  text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(f,{size:16,strokeWidth:2.5})," Agent Management"]}),(0,t.jsxs)("button",{onClick:()=>C("chat"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all  duration-200 ${"chat"===u?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(w.MessageCircle,{size:16,strokeWidth:2.5})," Chat Settings"]}),(0,t.jsxs)("button",{onClick:()=>C("logs"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-xl transition-all  duration-200 ${"logs"===u?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-slate-600 hover:bg-slate-100/60 hover:text-slate-900 hover:scale-[1.02]"}`,children:[(0,t.jsx)(y,{size:16,strokeWidth:2.5})," Activity Logs"]})]}),(0,t.jsxs)(k.AnimatePresence,{mode:"wait",children:["general"===u&&(0,t.jsxs)(N.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white/90 backdrop-blur-xl rounded-2xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)] overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50/50 to-purple-50/50",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-2",children:[(0,t.jsx)(m,{size:18,strokeWidth:2.5})," API Authentication"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Manage the API Key used by Agents to authenticate with the server."})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Agent API Key"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{type:L?"text":"password",value:R,onChange:e=>F(e.target.value),className:"w-full pl-10 pr-10 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"YOUR_STATIC_API_KEY_HERE"}),(0,t.jsx)(m,{className:"absolute left-3 top-2.5 text-slate-400",size:16})]}),(0,t.jsx)("button",{onClick:()=>I(!L),className:"px-3 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 text-slate-600",title:L?"Hide":"Show",children:L?"Hide":"Show"}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(R),H({type:"success",text:"API Key copied to clipboard!"}),setTimeout(()=>H(null),3e3)},className:"px-3 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 text-slate-600",title:"Copy to Clipboard",children:(0,t.jsx)(h,{size:18})}),(0,t.jsx)("button",{onClick:()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="sk_live_";for(let s=0;s<32;s++)t+=e.charAt(Math.floor(Math.random()*e.length));F(t)},className:"px-3 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 text-slate-600",title:"Generate New Key",children:(0,t.jsx)(p.RefreshCw,{size:18})})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Warning: Changing this key will disconnect all agents until they are updated with the new key."})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-slate-100",children:(0,t.jsx)("button",{onClick:eh,disabled:z||_,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:shadow-lg hover:shadow-blue-500/30 text-white font-medium rounded-xl transition-all duration-200 flex items-center gap-2 disabled:opacity-50 hover:scale-[1.02]",children:z?"Saving...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Save,{size:18,strokeWidth:2.5})," Save Changes"]})})})]})]},"general"),"smtp"===u&&(0,t.jsxs)(N.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white/90 backdrop-blur-xl rounded-2xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)] overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50/50 to-purple-50/50",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-2",children:[(0,t.jsx)(r.Mail,{size:18,strokeWidth:2.5})," SMTP Configuration"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Configure email server settings for notifications and password resets."})]}),(0,t.jsxs)("form",{onSubmit:eu,className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"SMTP Host"}),(0,t.jsx)("input",{type:"text",value:O.host,onChange:e=>D({...O,host:e.target.value}),placeholder:"smtp.example.com",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Port"}),(0,t.jsx)("input",{type:"number",value:O.port,onChange:e=>D({...O,port:e.target.value}),placeholder:"587",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Username"}),(0,t.jsx)("input",{type:"text",value:O.user,onChange:e=>D({...O,user:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),(0,t.jsx)("input",{type:"password",value:O.password,onChange:e=>D({...O,password:e.target.value}),placeholder:"••••••••",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Encryption (Secure)"}),(0,t.jsxs)("select",{value:O.secure,onChange:e=>D({...O,secure:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[(0,t.jsx)("option",{value:"false",children:"false (TLS - Port 587)"}),(0,t.jsx)("option",{value:"true",children:"true (SSL - Port 465)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"From Email"}),(0,t.jsx)("input",{type:"text",value:O.from,onChange:e=>D({...O,from:e.target.value}),placeholder:'"SysTracker" <no-reply@example.com>',className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"mt-8 pt-8 border-t border-slate-100 italic",children:[(0,t.jsx)("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3",children:"Diagnostic Tool"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 items-end",children:[(0,t.jsxs)("div",{className:"flex-1 w-full",children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 mb-1 uppercase",children:"Test Recipient"}),(0,t.jsx)("input",{type:"email",value:U,onChange:e=>W(e.target.value),placeholder:"Enter recipient email...",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),(0,t.jsx)("button",{type:"button",onClick:ep,disabled:T||_,className:"w-full sm:w-auto px-4 py-2 bg-slate-900 hover:bg-black text-white text-xs font-bold rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:T?"Sending...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Send,{size:14})," Send Test"]})})]}),(0,t.jsxs)("p",{className:"text-[10px] text-slate-400 mt-2",children:["Specify a recipient to verify connection. SMTP settings must be ",(0,t.jsx)("strong",{children:"saved"})," before testing."]})]}),(0,t.jsx)("div",{className:"flex items-center justify-end pt-6 border-t border-slate-100 mt-6",children:(0,t.jsx)("button",{type:"submit",disabled:z||_,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:z?"Saving...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Save,{size:18})," Save Settings"]})})})]})]},"smtp"),"agent"===u&&(0,t.jsxs)(N.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(f,{size:18,className:"text-slate-400"})," Agent Auto-Updater"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Manage agent releases. Connected agents will automatically update to the latest version."})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wider mb-2",children:"Currently Distributed Version"}),V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-3xl font-bold text-slate-800 mb-1",children:["v",V]}),(0,t.jsxs)("p",{className:"text-sm text-slate-500 mb-3",children:["Uploaded ",q?new Date(q).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Unknown"]}),B&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"bg-white/80 rounded-lg px-3 py-1.5 border border-blue-200",children:[(0,t.jsx)("p",{className:"text-[10px] font-semibold text-blue-600 uppercase tracking-wider mb-0.5",children:"SHA256 Hash"}),(0,t.jsxs)("p",{className:"text-xs font-mono text-slate-700",children:[B.substring(0,16),"...",B.substring(B.length-8)]})]}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(B),H({type:"success",text:"Hash copied to clipboard!"}),setTimeout(()=>H(null),2e3)},className:"p-2 bg-white/80 hover:bg-white rounded-lg border border-blue-200 text-blue-600 transition-colors",title:"Copy full hash",children:(0,t.jsx)(h,{size:14})})]})]}):(0,t.jsx)("p",{className:"text-slate-500",children:"No agent release uploaded yet"})]}),(0,t.jsx)("div",{className:"bg-white/80 backdrop-blur-sm p-3 rounded-lg shadow-sm",children:(0,t.jsx)(b,{className:"text-blue-600",size:24})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Upload New Agent Release"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Agent Executable File (.exe)"}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("input",{type:"file",accept:".exe",onChange:e=>Z(e.target.files?.[0]||null),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100 transition-colors"})}),G&&(0,t.jsxs)("p",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[(0,t.jsx)(c.CheckCircle,{size:12,className:"text-green-600"}),"Selected: ",G.name," (",(G.size/1024/1024).toFixed(2)," MB)"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Semantic Version Number"}),(0,t.jsx)("input",{type:"text",value:Q,onChange:e=>ee(e.target.value),placeholder:"2.9.0",pattern:"\\d+\\.\\d+\\.\\d+",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Format: X.Y.Z (e.g., 2.9.0). Agents will automatically update if their version is lower."})]}),(0,t.jsx)("button",{onClick:eb,disabled:X||!G||!Q,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-blue-200",children:X?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.RefreshCw,{size:18,className:"animate-spin"}),"Uploading..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Upload,{size:18}),"Upload Agent Release"]})})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(c.CheckCircle,{size:18,className:"text-emerald-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-emerald-900 mb-1",children:"Built-in Safety Mechanisms"}),(0,t.jsxs)("ul",{className:"text-xs text-emerald-800 space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"SHA256 Hash Verification"})," - Every download is verified for integrity"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Automatic Backup"})," - Old version is saved before updating"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Smart Rollback"})," - Auto-restores if new version fails to start"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"File Size Check"})," - Ensures complete download before installing"]})]})]})]})}),(0,t.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(d.AlertCircle,{size:18,className:"text-amber-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-amber-900 mb-1",children:"How Auto-Updates Work"}),(0,t.jsxs)("ul",{className:"text-xs text-amber-800 space-y-1",children:[(0,t.jsx)("li",{children:"• Agents check for updates every 60 minutes"}),(0,t.jsx)("li",{children:"• If a newer version is available, the agent downloads and verifies it"}),(0,t.jsx)("li",{children:"• Update installs automatically with backup/rollback protection"}),(0,t.jsx)("li",{children:"• No remote desktop session or manual intervention required"})]})]})]})})]})]})]},"agent"),"chat"===u&&(0,t.jsxs)(N.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(w.MessageCircle,{size:18,className:"text-slate-400"})," Chat Settings"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Configure file limits, allowed types, and retention for chat."})]}),(0,t.jsxs)("form",{onSubmit:em,className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Max File Size (MB)"}),(0,t.jsx)("input",{type:"number",min:1,value:eo.max_file_mb,onChange:e=>en({...eo,max_file_mb:Number(e.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Max Files Per Message"}),(0,t.jsx)("input",{type:"number",min:1,value:eo.max_files_per_message,onChange:e=>en({...eo,max_files_per_message:Number(e.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Message Retention (days)"}),(0,t.jsx)("input",{type:"number",min:1,value:eo.history_days,onChange:e=>en({...eo,history_days:Number(e.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Allowed MIME Types"}),(0,t.jsx)("input",{type:"text",value:eo.allowed_mime,onChange:e=>en({...eo,allowed_mime:e.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"image/jpeg,image/png,application/pdf"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Comma-separated list of allowed file types."})]})]}),(0,t.jsx)("div",{className:"flex items-center justify-end pt-6 border-t border-slate-100",children:(0,t.jsx)("button",{type:"submit",disabled:z||_,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:z?"Saving...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Save,{size:18})," Save Chat Settings"]})})})]})]},"chat"),"logs"===u&&(0,t.jsxs)(N.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[(0,t.jsx)(y,{size:18,className:"text-slate-400"})," Activity Logs"]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"User & system activity for the last 45 days. Older entries are purged automatically."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:ed,disabled:ea,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-500",title:"Refresh",children:(0,t.jsx)(p.RefreshCw,{size:16,className:ea?"animate-spin":""})}),(0,t.jsxs)("button",{onClick:()=>{let e=new Blob([[["ID","Actor","Action","Target","Detail","IP","Timestamp"],...et.map(e=>[e.id,e.actor,e.action,e.target||"",e.detail||"",e.ip||"",e.ts])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=`systracker-audit-${new Date().toISOString().slice(0,10)}.csv`,t.click()},disabled:0===et.length,className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg border border-slate-200 transition-colors disabled:opacity-50",children:[(0,t.jsx)(b,{size:15})," Export CSV"]})]})]}),(0,t.jsxs)("div",{className:"px-6 py-3 border-b border-slate-100 flex items-center gap-3 bg-slate-50/50",children:[(0,t.jsx)(j,{size:14,className:"text-slate-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Filter by actor...",value:er.actor,onChange:e=>ei({...er,actor:e.target.value}),className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400/40 w-40"}),(0,t.jsxs)("select",{value:er.action,onChange:e=>ei({...er,action:e.target.value}),className:"px-3 py-1.5 text-sm rounded-lg border border-slate-200 focus:outline-none bg-white focus:ring-2 focus:ring-blue-400/40",children:[(0,t.jsx)("option",{value:"",children:"All actions"}),(0,t.jsx)("option",{value:"login",children:"login"}),(0,t.jsx)("option",{value:"logout",children:"logout"}),(0,t.jsx)("option",{value:"user_created",children:"user_created"}),(0,t.jsx)("option",{value:"user_deleted",children:"user_deleted"}),(0,t.jsx)("option",{value:"role_changed",children:"role_changed"}),(0,t.jsx)("option",{value:"user_updated",children:"user_updated"}),(0,t.jsx)("option",{value:"mail_sent",children:"mail_sent"})]}),(0,t.jsx)("button",{onClick:ed,className:"px-3 py-1.5 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Apply"}),(er.actor||er.action)&&(0,t.jsx)("button",{onClick:()=>ei({actor:"",action:""}),className:"text-slate-400 hover:text-slate-600",children:(0,t.jsx)(v.X,{size:14})})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:ea?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(p.RefreshCw,{size:20,className:"text-blue-400 animate-spin"})}):0===et.length?(0,t.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,t.jsx)(y,{size:32,className:"mx-auto mb-2 opacity-30"}),(0,t.jsx)("p",{className:"text-sm",children:"No audit logs found"})]}):(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"border-b border-slate-100",children:(0,t.jsx)("tr",{children:["Actor","Action","Target","Detail","IP","Time"].map(e=>(0,t.jsx)("th",{className:"text-left px-4 py-2.5 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:e},e))})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-50",children:et.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-2.5 font-medium text-slate-800",children:e.actor}),(0,t.jsx)("td",{className:"px-4 py-2.5",children:(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${S[e.action]||"bg-slate-100 text-slate-600"}`,children:e.action})}),(0,t.jsx)("td",{className:"px-4 py-2.5 text-slate-600 max-w-[120px] truncate",children:e.target||"—"}),(0,t.jsx)("td",{className:"px-4 py-2.5 text-slate-500 max-w-[160px] truncate text-xs",children:e.detail||"—"}),(0,t.jsx)("td",{className:"px-4 py-2.5 text-slate-400 font-mono text-xs",children:e.ip||"—"}),(0,t.jsx)("td",{className:"px-4 py-2.5 text-slate-400 text-xs whitespace-nowrap",children:new Date(e.ts).toLocaleString()})]},e.id))})]})})]},"logs")]})]})}function _(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 pt-24 text-slate-500",children:"Loading..."}),children:(0,t.jsx)(C,{})})}e.s(["default",()=>_],41507)}]);